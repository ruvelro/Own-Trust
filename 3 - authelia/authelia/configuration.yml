# Configuraci√≥n del servidor de Authelia
server:
  # Direcci√≥n y puerto donde Authelia escuchar√°
  address: tcp://0.0.0.0:9091

  # Buffers de lectura y escritura (puedes dejar estos valores por defecto)
  buffers:
    read: 4096
    write: 4096

  # Encabezados HTTP de seguridad. Aqu√≠ se define una plantilla CSP (Content Security Policy)
  headers:
    csp_template: default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'

# Nivel de log. Puedes usar: trace, debug, info, warn, error, fatal
log:
  level: warn

# Tema de la interfaz web: light, dark o auto (seg√∫n el navegador del usuario)
theme: auto

# Configuraci√≥n para restablecer contrase√±as
identity_validation:
  reset_password:
    # üîê Clave JWT para firmar los tokens de recuperaci√≥n de contrase√±a
    # ‚ùó Genera tu propia clave segura usando: openssl rand -hex 64
    jwt_secret: "REEMPLAZAR_CON_TU_JWT_SECRET_GENERADO"

# Configuraci√≥n del sistema de autenticaci√≥n TOTP (2FA con apps como Google Authenticator)
totp:
  # Nombre que aparecer√° en la app TOTP
  issuer: authelia.com
  # Intervalo de tiempo en segundos para el c√≥digo
  period: 30
  # Tolerancia de desfase entre reloj del servidor y del usuario
  skew: 1

# Sistema de autenticaci√≥n principal. En este caso, basado en archivo.
authentication_backend:
  file:
    # Ruta al archivo que contiene los usuarios y contrase√±as (ver users_database.yml)
    path: /config/users_database.yml
    password:
      # Algoritmo para hash de contrase√±as. Se recomienda usar argon2id.
      algorithm: argon2id

# Control de acceso a los servicios
access_control:
  # Pol√≠tica por defecto (deny = nadie accede si no se define lo contrario)
  default_policy: deny

  # Reglas de acceso. Puedes a√±adir subdominios o rutas espec√≠ficas.
  rules:
    - domain: "*.midominio.xyz"  # ‚õî Reemplaza con tu dominio real
      policy: two_factor         # Solicita 2FA para todos los subdominios. Si no quieres doble autehticaci√≥n, usa "one_factor".

    # Ejemplo comentado para una regla espec√≠fica
    # - domain: "servicio.tudominio.com"
    #   policy: two_factor

# Configuraci√≥n de la sesi√≥n del usuario
session:
  # Nombre de la cookie de sesi√≥n
  name: authelia_session

  # üîê Clave secreta usada para firmar cookies de sesi√≥n
  # ‚ùó Genera tu propia clave usando: openssl rand -hex 64
  secret: "REEMPLAZAR_CON_TU_SESSION_SECRET_GENERADO"

  # Tiempo de expiraci√≥n total de la sesi√≥n
  expiration: 1h

  # Tiempo de inactividad antes de cerrar sesi√≥n autom√°ticamente
  inactivity: 15m

  # Duraci√≥n de la sesi√≥n cuando el usuario marca "Recordarme"
  remember_me: 2M

  # Configuraci√≥n de las cookies de sesi√≥n
  cookies:
    - name: authelia_session
      domain: midominio.xyz  # ‚õî Reemplaza con tu dominio principal
      authelia_url: https://auth.midominio.xyz  # üîó URL donde se ejecuta Authelia
      default_redirection_url: https://midominio.xyz  # üîó A d√≥nde redirige tras iniciar sesi√≥n

# Almacenamiento interno de Authelia
storage:
  # üîê Clave de cifrado de datos internos
  # ‚ùó Genera tu propia clave usando: openssl rand -hex 64
  encryption_key: "REEMPLAZAR_CON_TU_ENCRYPTION_KEY_GENERADA"

  # Base de datos local en formato SQLite
  local:
    path: /config/db.sqlite3

# Configuraci√≥n del sistema de notificaciones (por ejemplo, para recuperaci√≥n de contrase√±a)
notifier:
  # En este caso se usa el sistema de archivos como destino
  filesystem:
    filename: /config/notification.txt  # Aqu√≠ se escriben las notificaciones (√∫til en pruebas)